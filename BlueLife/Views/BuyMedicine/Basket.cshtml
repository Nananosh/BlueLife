@model List<BasketMedicine>
<div class="container">
    <div class="content">
        @{ int totalAmount = 0; }
        @foreach (var medicine in @Model)
        {
            {
                totalAmount += medicine.Quantity * medicine.PharmacyWarehouse.Price;
            }
            <div class="row mt-5 border-bottom pb-3">
                <div class="col-lg-2">
                    <img src="@medicine.PharmacyWarehouse.ReleaseMedicine.Image" alt="medicine" style="height: 150px;width: 150px;"/>
                </div>
                <div class="col-lg-4">
                    @if (@medicine.PharmacyWarehouse.IsRecipe)
                    {
                        <span class="text-danger">Для этого лекарства требуется рецепт</span>
                    }
                    <div class="h5">
                        <a asp-action="Medicine" asp-controller="BuyMedicine" asp-route-id="@medicine.PharmacyWarehouse.Id">@medicine.PharmacyWarehouse.ReleaseMedicine.Medicine.MedicineName.Name</a>
                    </div>
                    <div>Количесво : @medicine.Quantity</div>
                    <div>Стоимость : @medicine.PharmacyWarehouse.Price</div>
                </div>
                <div class="col-lg-5 d-flex justify-content-end align-items-start">
                    <a class="btn btn-danger" asp-action="DeleteMedicineInBasket" asp-controller="BuyMedicine" asp-route-id="@medicine.PharmacyWarehouse.Id" asp-route-userId="@User.Claims.ElementAt(0).Value">Удалить</a>
                </div>
            </div>
        }
        <div class="row mt-5">
            <div class="col-lg-12 d-flex justify-content-end align-items-baseline">
                <p>Итоговая сумма с учётом скидки: </p>
                <p class="text-success h3 ml-2">@ViewBag.FullPriceByDiscount</p>
                <div class="h4 ml-1">BYN</div>
            </div>
            <div class="col-lg-12 d-flex justify-content-end align-items-start">
                <form method="post" asp-controller="BuyMedicine" asp-action="AddBasketToOrder">
                    <div class="input-group d-flex justify-content-end align-items-baseline">
                        <p class="mr-2">Адрес самовывоза: </p>
                        <select class="custom-select" id="inputGroupSelect01" name="addressId">
                            @foreach (var address in ViewBag.Address)
                            {
                                <option value="@address.Id">@address.Address</option>
                            }
                        </select>
                    </div>
                    <input type="hidden" name="userId" value="@User.Claims.ElementAt(0).Value"/>
                    @if (Model.Count > 0)
                    {
                        <button type="submit" class="btn btn-primary justify-content-end">Оформить заказ</button>
                    }
                </form>
            </div>
        </div>
    </div>
</div>